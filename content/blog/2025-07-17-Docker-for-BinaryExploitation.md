+++
title= "Docker for Binary Exploitation"
date= "2025-07-17"
categories= ["CTF", "CTFEnvironment"]
tags= ["pwn", "rop", "return-oriented-programming", "linux-binary-exploitation", "binary-exploitation", "buffer-overflow", "stack-based-buffer-overflow", "python", "c", "docker", "Dockerfile"]
description= "Reverse engineering and exploit development docker environment."
image= "/images/SmileyCTF/SmileyCTF-Babyrop-2/smileyCTF_pic.png"
[extra]
cover.image="/images/SmileyCTF/SmileyCTF-Babyrop-2/smileyCTF_pic.png"
cover.alt="Reverse engineering and exploit development docker environment."
+++

## Dockerfile

This is updated version of Dockerfile.

```docker
# Bootstrapped from https://github.com/LiveOverflow/pwn_docker_example/blob/master/ctf/Dockerfile
# Thanks, LiveOverflow!
###


# Build the docker container -> build.sh
# Run the docker container -> run.sh
# Get a shell in the container -> shell.sh

FROM ubuntu:24.04
ENV LC_CTYPE=C.UTF-8
ENV DEBIAN_FRONTEND=noninteractive
COPY dot_rizinrc /root/.rizinrc
RUN apt-get update && \
apt-get install -y build-essential cargo file elfutils bsdmainutils patchelf gdbserver jq strace ltrace curl wget rubygems gcc dnsutils netcat-traditional ipython3 gcc-multilib net-tools \
  vim gdb gdb-multiarch python3-full python3-pip python3-dev libssl-dev libffi-dev wget git make procps pipx \
  libpcre3-dev libdb-dev libxt-dev libxaw7-dev emacs-nox tmux && \
pipx ensurepath && \
pipx install uv && \
pip3 install --break-system-packages capstone requests pwntools r2pipe keystone-engine unicorn ropper meson ninja z3-solver pyvex archinfo && \
mkdir /tools && \
cd /tools && git clone https://github.com/JonathanSalwan/ROPgadget && \
cd /tools && git clone https://github.com/niklasb/libc-database && \
cd /tools && git clone https://github.com/hugsy/gef && \
wget -O /root/.gdbinit-gef.py -q https://raw.githubusercontent.com/hugsy/gef/main/gef.py && \
wget -O /root/.tmux.conf -q https://raw.githubusercontent.com/ismailbozkurt/HACKTHEBOX-WRITEUPS/refs/heads/master/.tmux.conf-updated && \
echo '#source /root/.gdbinit-gef.py' >> /root/.gdbinit && \ 
cd /tools && git clone --recurse-submodules https://github.com/rizinorg/rizin && \
cd rizin && meson build && ninja -C build && ninja -C build install && \
cd /tools && git clone https://github.com/radareorg/radare2 && radare2/sys/install.sh
RUN gem install one_gadget
RUN cargo install ropr && \
echo "export PATH=/root/.cargo/bin:$PATH" >> ~/.bashrc
RUN curl -qsL 'https://install.pwndbg.re' | sh -s -- -t pwndbg-gdb
```


### build.sh

```bash
#!/bin/sh
docker build -f Dockerfile -t docker-binaryexploitation:ubuntu24.04 .
```

### run.sh

```bash
#!/bin/sh
docker run --rm -v "$(pwd):/host" -v "$(pwd)/logs:/logs" --cap-add=SYS_PTRACE --security-opt seccomp=unconfined -d --name docker-binaryexploitation --privileged -i docker-binaryexploitation:ubuntu24.04
```
### shell.sh

```bash
#!/bin/sh
docker exec -it docker-binaryexploitation /bin/bash
```


### dot_rizinrc

```bash
e asm.cmt.right=true
e asm.pseudo=true
eco darkda
e scr.utf8=true
e dbg.slow=true
```

### dot_bashrc


```bash
export HISTCONTROL=ignoredups:ignorespace
export HISTSIZE=5000
export HISTFILESIZE=5000
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi
if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi


# From https://twitter.com/ahakcil/status/1230854797613522944 
ps1_state(){ 
        ret=$? 
        if [ $ret -eq 0 ]; then 
                echo -e "[$(date +%H:%M:%S)]\xF0\x9F\x94\xA5" 
        else 
                echo -e "[$(date +%H:%M:%S)]\xF0\x9F\x94\xB4->$ret " 
        fi 
} 
export PS1='${debian_chroot:+($debian_chroot)}$(ps1_state)\[\033[01;31m\]\u\[\033[00m\][ \[\033[01;34m\]\w\[\033[00m\] ]\$ ' 
 
# From https://twitter.com/n00py1/status/1230755337797394434 
script -f /logs/$(date +"%d-%b-%y_%H-%M-%S")_shell.log 

```

Credit: [Elvira](https://github.com/deadbeefmonster/docker-binaryexploitation/tree/elvira)
Special thanks to: [LiveOverflow](https://github.com/LiveOverflow/pwn_docker_example/blob/master/ctf/Dockerfile)

